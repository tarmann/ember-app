<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTML</title>
</head>
<body>

<script type="text/x-handlebars">
  <h1>Collection</h1>
  
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="user/error">
  USER ERROR
</script>

<script type="text/x-handlebars" data-template-name="user/collection">
  {{#each model}}
    <p>Name: {{model}}</p>
  {{/each}}
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/ember.js/1.12.1/ember.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/ember.js/1.12.1/ember-template-compiler.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/ember-data.js/1.0.0-beta.19/ember-data.min.js"></script>

<script>
window.App = Ember.Application.create();

// Router

App.Router.map(function() {
  this.resource('user', function() {
    this.route('collection', { path: ':user' })
  });
});

App.Router.reopen({
  location: 'hash'
});

App.UserCollectionRoute = Ember.Route.extend({
  model: function(params) {
    return [{ name: 'foo' }, { name: 'bar' }];
  }
});

// Models

App.UserCollectionSerializer = DS.RESTSerializer.extend({
  primaryKey: 'gameId',
  serialize: function(snapshot, options){
    return { collection: snapshot };
  }
});

App.UserCollectionModel = DS.Model.extend({
  name: DS.attr(),
  rating: DS.attr(),
  minPlayers: DS.attr(),
  maxPlayers: DS.attr()
});

App.UserCollectionAdapter = DS.RESTAdapter.extend({
  host: 'http://bgg-json.azurewebsites.net',
  pathForType: function(type) {
    return 'collection';
  }
});

// Controllers

App.UserCollectionController = Ember.Controller.extend({
  
  actions: {
    add: function() {
      this.store.find('collection', 'tarmann').then(function (collection){
        console.log('collection loaded');
      });
    }
  }

});

</script>
</body>
</html>